// 3027. Find the Number of Ways to Place People II
// https://leetcode.com/problems/find-the-number-of-ways-to-place-people-ii/

struct Solution;

impl Solution {
    pub fn number_of_pairs(mut points: Vec<Vec<i32>>) -> i32 {
        let mut ans = 0;
        points.sort_by(|a, b| a[0].cmp(&b[0]).then(b[1].cmp(&a[1])));

        for i in 0..points.len() - 1 {
            let point_a = &points[i];
            let mut x_min = point_a[0] - 1;
            let x_max = i32::MAX;
            let mut y_min = i32::MIN;
            let y_max = point_a[1] + 1;

            for j in i + 1..points.len() {
                let point_b = &points[j];

                if point_b[0] > x_min
                    && point_b[0] < x_max
                    && point_b[1] > y_min
                    && point_b[1] < y_max
                {
                    ans += 1;
                    x_min = point_b[0];
                    y_min = point_b[1];
                }
            }
        }
        ans
    }

    // time exceed
    pub fn _number_of_pairs(points: Vec<Vec<i32>>) -> i32 {
        let n = points.len();
        let mut count = 0;

        // Convert to tuple for easier handling
        let points: Vec<(i32, i32)> = points.into_iter().map(|p| (p[0], p[1])).collect();

        // Try all ordered pairs of points
        for i in 0..n {
            for j in 0..n {
                if i == j {
                    continue;
                }

                let (x1, y1) = points[i];
                let (x2, y2) = points[j];

                // Check if point i is upper-left and point j is lower-right
                // This means x1 <= x2 and y1 >= y2
                if x1 <= x2 && y1 >= y2 {
                    // Check if there are any other points inside the rectangle (including boundary)
                    let mut valid = true;

                    for k in 0..n {
                        if k == i || k == j {
                            continue;
                        }

                        let (x3, y3) = points[k];

                        // Point k should not be inside/on the rectangle boundary
                        // Rectangle from upper-left (x1,y1) to lower-right (x2,y2)
                        if x1 <= x3 && x3 <= x2 && y2 <= y3 && y3 <= y1 {
                            valid = false;
                            break;
                        }
                    }

                    if valid {
                        count += 1;
                    }
                }
            }
        }

        count
    }
}

#[cfg(test)]
mod tests {
    use crate::hard::find_the_number_of_ways_to_place_people_ii::Solution;

    #[test]
    fn test_number_of_pairs_1() {
        let points = [[1, 1], [2, 2], [3, 3]]
            .into_iter()
            .map(|l| l.to_vec())
            .collect::<Vec<Vec<i32>>>();
        assert_eq!(0, Solution::number_of_pairs(points));
    }

    #[test]
    fn test_number_of_pairs_2() {
        let points = [[6, 2], [4, 4], [2, 6]]
            .into_iter()
            .map(|l| l.to_vec())
            .collect::<Vec<Vec<i32>>>();
        assert_eq!(2, Solution::number_of_pairs(points));
    }

    #[test]
    fn test_number_of_pairs_3() {
        let points = [[3, 1], [1, 3], [1, 1]]
            .into_iter()
            .map(|l| l.to_vec())
            .collect::<Vec<Vec<i32>>>();
        assert_eq!(2, Solution::number_of_pairs(points));
    }

    #[test]
    fn test_number_of_pairs_4() {
        let points = [
            [378, 223],
            [63, 312],
            [10, 475],
            [247, 321],
            [143, 340],
            [246, 500],
            [322, 430],
            [391, 329],
            [409, 200],
            [344, 338],
            [294, 251],
            [34, 358],
            [204, 354],
            [25, 199],
            [45, 105],
            [14, 85],
            [85, 180],
            [307, 244],
            [306, 418],
            [116, 73],
            [200, 449],
            [122, 107],
            [155, 498],
            [366, 211],
            [8, 366],
            [460, 135],
            [78, 334],
            [393, 303],
            [321, 346],
            [227, 232],
            [400, 396],
            [68, 455],
            [428, 294],
            [68, 236],
            [322, 120],
            [213, 266],
            [381, 439],
            [130, 117],
            [182, 451],
            [56, 58],
            [417, 50],
            [185, 328],
            [221, 201],
            [95, 4],
            [348, 159],
            [46, 466],
            [53, 96],
            [376, 406],
            [35, 151],
            [9, 283],
            [176, 321],
            [487, 357],
            [298, 191],
            [394, 327],
            [379, 353],
            [324, 18],
            [208, 267],
            [470, 288],
            [21, 354],
            [235, 229],
            [264, 205],
            [113, 368],
            [81, 332],
            [408, 2],
            [114, 161],
            [353, 330],
            [262, 346],
            [484, 155],
            [56, 315],
            [481, 61],
            [218, 84],
            [444, 206],
            [315, 327],
            [334, 260],
            [217, 241],
            [319, 356],
            [30, 294],
            [491, 356],
            [387, 462],
            [220, 205],
            [152, 368],
            [485, 276],
            [424, 418],
            [279, 248],
            [204, 358],
            [106, 225],
            [89, 213],
            [200, 451],
            [436, 12],
            [217, 315],
            [201, 307],
            [286, 164],
            [257, 257],
            [290, 335],
            [123, 461],
            [412, 324],
            [207, 325],
            [276, 414],
            [407, 122],
            [258, 240],
            [99, 35],
            [95, 141],
            [294, 420],
            [325, 12],
            [329, 8],
            [414, 65],
            [456, 371],
            [438, 368],
            [19, 229],
            [35, 256],
            [40, 302],
            [183, 402],
            [79, 64],
            [4, 16],
            [209, 274],
            [171, 271],
            [284, 75],
            [285, 417],
            [377, 162],
            [423, 285],
            [320, 217],
            [87, 14],
            [242, 25],
            [158, 262],
            [239, 438],
            [415, 452],
            [7, 93],
            [248, 291],
            [302, 34],
            [35, 280],
            [105, 193],
            [362, 38],
            [479, 159],
            [422, 426],
            [277, 160],
            [80, 456],
            [47, 180],
            [461, 437],
            [148, 378],
            [464, 75],
            [499, 43],
            [153, 420],
            [258, 50],
            [34, 238],
            [18, 437],
            [335, 49],
            [479, 254],
            [103, 401],
            [313, 214],
            [151, 247],
            [48, 37],
            [109, 426],
            [213, 232],
            [59, 74],
            [47, 441],
            [323, 195],
            [200, 416],
            [399, 5],
            [182, 105],
            [121, 500],
            [356, 233],
            [55, 291],
            [387, 8],
            [306, 26],
            [403, 26],
            [170, 165],
            [468, 415],
            [107, 49],
            [383, 439],
            [120, 376],
            [142, 458],
            [222, 182],
            [70, 436],
            [372, 53],
            [210, 470],
            [119, 335],
            [473, 175],
            [336, 497],
            [50, 350],
            [215, 360],
            [63, 229],
            [264, 195],
            [493, 335],
            [231, 457],
            [148, 73],
            [118, 98],
            [123, 299],
            [408, 167],
            [308, 170],
            [446, 224],
            [75, 427],
            [297, 26],
            [69, 169],
            [132, 194],
            [18, 311],
            [286, 255],
            [451, 285],
            [447, 147],
            [253, 374],
            [225, 409],
            [243, 336],
            [453, 29],
            [23, 436],
            [238, 210],
            [68, 378],
            [426, 29],
            [433, 491],
            [109, 174],
            [125, 44],
            [45, 428],
            [249, 94],
            [140, 265],
            [398, 404],
            [37, 289],
            [278, 226],
            [223, 411],
            [271, 265],
            [467, 214],
            [216, 319],
            [344, 483],
            [381, 471],
            [484, 407],
            [427, 35],
            [225, 35],
            [400, 61],
            [208, 4],
            [289, 147],
            [365, 279],
            [300, 202],
            [289, 435],
            [319, 314],
            [202, 470],
            [401, 379],
            [127, 359],
            [212, 426],
            [328, 229],
            [371, 120],
            [140, 292],
            [58, 366],
            [307, 216],
            [13, 277],
            [250, 213],
            [189, 68],
            [133, 106],
            [248, 491],
            [12, 53],
            [83, 359],
            [43, 128],
            [57, 271],
            [5, 51],
            [55, 489],
            [108, 360],
            [353, 389],
            [137, 495],
            [477, 312],
            [84, 46],
            [111, 177],
            [93, 104],
            [177, 482],
            [484, 52],
            [500, 241],
            [405, 455],
            [163, 372],
            [277, 154],
            [181, 100],
            [231, 491],
            [447, 98],
            [104, 383],
            [33, 405],
            [460, 105],
            [18, 73],
            [499, 231],
            [374, 90],
            [2, 147],
            [490, 19],
            [331, 248],
            [446, 83],
            [307, 464],
            [268, 10],
            [280, 408],
            [79, 17],
            [354, 250],
            [437, 129],
            [268, 384],
            [137, 430],
            [395, 215],
            [347, 368],
            [369, 449],
            [268, 80],
            [366, 445],
            [155, 237],
            [417, 477],
            [280, 218],
            [272, 253],
            [51, 218],
            [238, 249],
            [481, 455],
            [178, 344],
            [1, 477],
            [326, 71],
            [320, 331],
            [381, 202],
            [263, 105],
            [454, 410],
            [482, 488],
            [273, 419],
            [99, 172],
            [408, 465],
            [485, 154],
            [448, 72],
            [472, 192],
            [210, 136],
            [226, 19],
            [337, 411],
            [299, 83],
            [153, 320],
            [122, 52],
            [336, 264],
            [460, 349],
            [254, 371],
            [449, 336],
            [45, 92],
            [114, 220],
            [433, 457],
            [67, 166],
            [287, 69],
            [185, 292],
            [485, 144],
            [280, 315],
            [398, 299],
            [329, 323],
            [45, 432],
            [264, 470],
            [199, 320],
            [20, 36],
            [206, 326],
            [247, 17],
            [429, 341],
            [261, 113],
            [400, 440],
            [280, 65],
            [110, 138],
            [495, 261],
            [208, 216],
            [497, 184],
            [435, 491],
            [339, 373],
            [320, 28],
            [387, 433],
            [435, 171],
            [291, 63],
            [314, 51],
            [441, 62],
            [135, 79],
            [471, 244],
            [269, 283],
            [496, 22],
            [186, 200],
            [36, 106],
            [66, 3],
            [246, 91],
            [450, 451],
            [79, 230],
            [287, 211],
            [253, 10],
            [181, 60],
            [412, 421],
            [276, 440],
            [308, 496],
            [404, 25],
            [352, 351],
            [199, 142],
            [315, 471],
            [100, 363],
            [470, 70],
            [254, 320],
            [9, 405],
            [108, 358],
            [188, 8],
            [80, 161],
            [312, 435],
            [242, 217],
            [211, 1],
            [39, 19],
            [364, 329],
            [67, 145],
            [83, 62],
            [98, 478],
            [106, 293],
            [461, 158],
            [278, 149],
            [61, 330],
            [495, 326],
            [371, 60],
            [307, 391],
            [269, 23],
            [370, 343],
            [499, 295],
            [230, 129],
            [175, 372],
            [496, 431],
            [11, 335],
            [14, 23],
            [178, 343],
            [188, 342],
            [3, 174],
            [347, 198],
            [352, 492],
            [233, 97],
            [64, 14],
            [463, 380],
            [96, 214],
            [5, 176],
            [438, 490],
            [198, 350],
            [455, 398],
            [76, 343],
            [487, 310],
            [121, 33],
            [322, 191],
            [452, 481],
            [351, 53],
            [362, 124],
            [192, 183],
            [26, 120],
            [299, 21],
            [14, 181],
            [479, 143],
            [195, 406],
            [334, 169],
            [97, 448],
            [179, 429],
            [379, 401],
            [249, 62],
            [82, 227],
            [472, 437],
            [491, 173],
            [29, 318],
            [153, 488],
            [119, 24],
            [25, 328],
            [325, 264],
            [488, 33],
            [388, 356],
            [461, 241],
            [484, 188],
            [152, 221],
            [95, 456],
            [227, 438],
            [187, 350],
            [411, 143],
            [32, 236],
            [446, 389],
            [211, 387],
            [131, 156],
            [262, 461],
            [27, 434],
            [467, 460],
            [388, 172],
            [306, 289],
            [254, 478],
            [364, 277],
            [372, 395],
            [341, 417],
            [299, 215],
            [235, 481],
            [241, 293],
            [331, 140],
            [235, 300],
            [423, 424],
            [139, 451],
            [217, 107],
            [296, 131],
            [307, 189],
            [457, 169],
            [403, 23],
            [409, 379],
            [423, 112],
            [247, 153],
            [496, 257],
            [375, 241],
            [412, 126],
            [9, 365],
            [70, 431],
            [366, 354],
            [135, 111],
            [426, 222],
            [284, 286],
            [210, 494],
            [458, 461],
            [310, 219],
            [198, 410],
            [249, 176],
            [297, 338],
            [95, 464],
            [23, 353],
            [32, 10],
            [254, 68],
            [309, 312],
            [286, 302],
            [13, 262],
            [151, 317],
            [103, 262],
            [455, 431],
            [53, 246],
            [404, 407],
            [287, 263],
            [318, 109],
            [135, 107],
            [284, 19],
            [223, 15],
            [256, 472],
            [267, 27],
            [355, 384],
            [154, 253],
            [88, 330],
            [80, 68],
            [346, 132],
            [484, 284],
            [235, 414],
            [235, 368],
            [135, 190],
            [4, 159],
            [217, 475],
            [143, 451],
            [221, 132],
            [343, 242],
            [83, 10],
            [483, 287],
            [366, 122],
            [150, 344],
            [387, 411],
            [447, 2],
            [345, 6],
            [224, 424],
            [362, 327],
            [14, 399],
            [12, 166],
            [321, 469],
            [265, 176],
            [470, 470],
            [164, 243],
            [151, 281],
            [350, 487],
            [63, 236],
            [314, 442],
            [183, 4],
            [88, 56],
            [318, 6],
            [286, 84],
            [190, 301],
            [179, 134],
            [496, 31],
            [179, 261],
            [130, 428],
            [273, 121],
            [341, 420],
            [31, 15],
            [140, 474],
            [494, 147],
            [500, 49],
            [96, 315],
            [445, 176],
            [212, 326],
            [466, 479],
            [30, 95],
            [206, 290],
            [325, 312],
            [306, 17],
            [168, 256],
            [259, 149],
            [446, 71],
            [123, 207],
            [362, 49],
            [362, 50],
            [402, 79],
            [38, 434],
            [462, 40],
            [317, 488],
            [274, 228],
            [245, 346],
            [43, 315],
            [413, 154],
            [390, 134],
            [256, 437],
            [178, 96],
            [437, 354],
            [278, 282],
            [92, 119],
            [151, 249],
            [459, 499],
            [63, 14],
            [121, 27],
            [35, 399],
            [203, 228],
            [296, 486],
            [217, 81],
            [110, 376],
            [471, 164],
            [350, 109],
            [4, 392],
            [399, 340],
            [94, 156],
            [97, 447],
            [84, 114],
            [95, 15],
            [158, 49],
            [354, 77],
            [360, 119],
            [412, 453],
            [351, 467],
            [418, 271],
            [346, 313],
            [85, 433],
            [405, 26],
            [118, 26],
            [275, 378],
            [88, 478],
            [435, 229],
            [362, 481],
            [96, 148],
            [15, 325],
            [171, 149],
            [246, 128],
            [223, 446],
            [123, 11],
            [63, 376],
            [59, 112],
            [434, 301],
            [225, 42],
            [28, 143],
            [328, 383],
            [194, 451],
            [397, 28],
            [187, 399],
            [54, 136],
            [208, 499],
            [485, 418],
            [191, 416],
            [98, 25],
            [379, 10],
            [492, 121],
            [95, 1],
            [113, 297],
            [216, 232],
            [89, 258],
            [155, 321],
            [225, 447],
            [314, 153],
            [327, 229],
            [22, 489],
            [361, 457],
            [142, 270],
            [176, 384],
            [379, 258],
            [111, 144],
            [373, 282],
            [16, 236],
            [27, 378],
            [22, 289],
            [281, 379],
            [10, 203],
            [68, 124],
            [375, 75],
            [194, 117],
            [475, 150],
            [109, 339],
            [35, 324],
            [40, 398],
            [96, 269],
            [249, 270],
            [466, 119],
            [20, 375],
            [323, 422],
            [341, 135],
            [213, 366],
            [218, 444],
            [279, 498],
            [125, 177],
            [99, 273],
            [22, 272],
            [350, 322],
            [417, 348],
            [38, 126],
            [464, 189],
            [134, 245],
            [488, 63],
            [109, 91],
            [213, 281],
            [212, 170],
            [255, 26],
            [213, 444],
            [143, 174],
            [500, 94],
            [283, 99],
            [186, 43],
            [150, 177],
            [126, 367],
            [117, 192],
            [319, 192],
            [164, 471],
            [50, 438],
            [106, 335],
            [46, 166],
            [1, 321],
            [463, 58],
            [272, 484],
            [124, 380],
            [423, 330],
            [5, 248],
            [63, 73],
            [16, 223],
            [86, 15],
            [189, 377],
            [57, 90],
            [42, 479],
            [52, 2],
            [264, 300],
            [16, 105],
            [383, 320],
            [283, 346],
            [61, 469],
            [248, 88],
            [360, 251],
            [46, 3],
            [325, 16],
            [352, 97],
            [262, 2],
            [408, 449],
            [129, 103],
            [264, 21],
            [229, 35],
            [226, 42],
            [385, 253],
            [368, 256],
            [223, 335],
            [309, 306],
            [196, 411],
            [461, 324],
            [115, 278],
            [289, 447],
            [145, 40],
            [208, 239],
            [32, 26],
            [361, 262],
            [431, 140],
            [133, 159],
            [313, 231],
            [223, 228],
            [162, 403],
            [22, 295],
            [257, 21],
            [233, 395],
            [361, 350],
            [93, 460],
            [36, 59],
            [287, 245],
            [495, 164],
            [450, 196],
            [68, 154],
            [277, 186],
            [402, 112],
            [267, 340],
            [260, 324],
            [8, 301],
            [410, 347],
            [404, 368],
            [14, 166],
            [65, 333],
            [224, 9],
            [322, 52],
            [32, 181],
            [318, 382],
            [86, 193],
            [137, 159],
            [361, 40],
            [234, 365],
            [196, 111],
            [55, 118],
            [300, 444],
            [238, 161],
            [93, 395],
            [123, 475],
            [241, 33],
            [271, 399],
            [252, 286],
            [80, 314],
            [277, 431],
            [3, 329],
            [443, 32],
            [250, 226],
            [433, 439],
            [201, 209],
            [347, 345],
            [109, 348],
            [341, 30],
            [87, 390],
            [91, 215],
            [132, 8],
            [89, 286],
            [364, 274],
            [344, 50],
            [196, 284],
            [403, 437],
            [278, 170],
            [405, 349],
            [493, 159],
            [35, 320],
            [361, 377],
            [436, 309],
            [26, 45],
            [76, 485],
            [31, 287],
            [281, 95],
            [439, 227],
            [284, 269],
            [226, 301],
            [145, 476],
            [228, 238],
            [298, 205],
            [384, 494],
            [316, 354],
            [322, 490],
            [345, 55],
            [333, 385],
            [210, 438],
            [312, 139],
            [277, 106],
            [206, 403],
            [378, 224],
            [414, 382],
            [220, 215],
            [377, 34],
            [117, 138],
            [412, 336],
            [449, 285],
            [312, 35],
            [273, 1],
            [110, 438],
            [179, 182],
            [41, 35],
            [123, 412],
            [162, 289],
            [318, 350],
            [277, 430],
            [2, 108],
            [468, 231],
            [464, 411],
            [464, 56],
            [56, 248],
            [168, 294],
            [83, 400],
            [427, 48],
            [177, 142],
            [69, 151],
            [59, 104],
            [308, 257],
            [366, 418],
            [425, 218],
            [251, 137],
            [483, 154],
            [255, 69],
            [328, 329],
            [339, 137],
            [448, 165],
            [132, 30],
            [409, 11],
            [499, 308],
            [218, 92],
            [391, 94],
            [118, 412],
            [8, 452],
            [17, 8],
            [465, 379],
            [324, 382],
            [491, 153],
            [329, 422],
            [143, 206],
            [104, 377],
            [439, 100],
            [119, 419],
            [83, 260],
            [314, 331],
            [446, 11],
            [124, 361],
            [275, 112],
            [126, 65],
            [245, 354],
            [420, 40],
            [105, 370],
            [334, 244],
            [77, 4],
            [56, 291],
            [342, 279],
            [185, 162],
            [348, 193],
            [251, 336],
            [176, 497],
            [158, 177],
            [356, 283],
            [444, 224],
            [223, 384],
            [141, 394],
            [300, 356],
            [435, 234],
            [90, 328],
            [322, 480],
            [464, 426],
            [453, 403],
            [12, 306],
            [180, 469],
            [26, 225],
            [325, 425],
            [265, 386],
            [229, 308],
            [200, 298],
            [180, 496],
            [466, 461],
            [378, 458],
            [443, 297],
            [284, 172],
            [303, 17],
            [396, 139],
            [390, 382],
            [25, 381],
            [327, 207],
            [356, 378],
            [328, 484],
            [84, 72],
            [323, 83],
            [65, 117],
            [208, 403],
            [26, 299],
            [414, 301],
            [53, 381],
            [354, 190],
            [257, 79],
            [143, 365],
            [469, 109],
            [453, 46],
            [16, 343],
            [7, 469],
            [411, 115],
            [213, 221],
            [177, 362],
            [39, 130],
            [172, 76],
            [374, 16],
            [491, 354],
            [393, 372],
            [212, 302],
            [25, 334],
            [420, 397],
            [103, 52],
            [251, 481],
            [182, 476],
            [348, 277],
            [447, 457],
            [69, 387],
            [45, 443],
            [261, 273],
            [117, 491],
            [351, 52],
            [113, 64],
            [335, 14],
            [81, 227],
            [8, 320],
            [367, 438],
            [389, 167],
            [477, 204],
            [198, 124],
            [201, 432],
            [315, 442],
            [135, 293],
            [258, 197],
            [256, 273],
            [160, 283],
            [89, 138],
            [198, 24],
            [409, 13],
            [7, 385],
            [266, 319],
            [322, 223],
            [44, 473],
            [149, 352],
            [97, 406],
            [422, 9],
            [358, 8],
            [192, 137],
            [356, 171],
            [366, 405],
            [453, 97],
            [313, 229],
            [341, 147],
            [198, 97],
            [39, 150],
            [419, 337],
            [293, 71],
            [194, 479],
            [244, 360],
        ]
        .into_iter()
        .map(|l| l.to_vec())
        .collect::<Vec<Vec<i32>>>();
        assert_eq!(4575, Solution::number_of_pairs(points));
    }
}
